-- Ustawienia i zmienne
local Player = game.Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local RootPart = Character:WaitForChild("HumanoidRootPart")

_G.FarmActive = false -- Stan początkowy

-- Tworzenie prostego przycisku GUI
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
local ToggleBtn = Instance.new("TextButton", ScreenGui)

ToggleBtn.Size = UDim2.new(0, 150, 0, 50)
ToggleBtn.Position = UDim2.new(0.5, -75, 0.1, 0)
ToggleBtn.Text = "Farm Coins: OFF"
ToggleBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)

-- Funkcja szukająca najbliższej monety
local function getClosestCoin()
    local closestCoin = nil
    local shortestDistance = math.huge
    
    -- W MM2 monety zazwyczaj są w folderze o nazwie "CoinContainer" lub po prostu w Workspace
    -- Szukamy obiektów o nazwie "Coin_Server" lub "Coin"
    for _, obj in pairs(game.Workspace:GetDescendants()) do
        if obj.Name == "Coin_Server" or obj.Name == "Coin" then
            -- Sprawdź czy moneta nie została już zebrana (często zmieniają Transparency)
            if obj:IsA("BasePart") and obj.Transparency < 1 then
                local distance = (RootPart.Position - obj.Position).Magnitude
                if distance < shortestDistance then
                    shortestDistance = distance
                    closestCoin = obj
                end
            end
        end
    end
    return closestCoin
end

-- Obsługa kliknięcia
ToggleBtn.MouseButton1Click:Connect(function()
    _G.FarmActive = not _G.FarmActive
    ToggleBtn.Text = _G.FarmActive and "Farm Coins: ON" or "Farm Coins: OFF"
    ToggleBtn.BackgroundColor3 = _G.FarmActive and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
    
    -- Pętla główna
    task.spawn(function()
        while _G.FarmActive do
            local target = getClosestCoin()
            if target then
                -- Przesunięcie postaci (CFrame)
                RootPart.CFrame = target.CFrame
            end
            task.wait(0.1) -- Czas oczekiwania między "skokami"
        end
    end)
end)
